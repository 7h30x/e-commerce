<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
  <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>
</head>
<body>
  <div id="vue">
    <div class="col-md-4" v-for="item in items">
        <div class="item">
            <img class="item-img-top img-responsive" v-bind:src="item.picture">
            <div class="item-body">
              <h4 class="item-name"> {{item.name}} </h4>
              <h4 class="item-price"> Price-per-night: {{item.price}}</h4>
              <p class="item-text" > Rating: {{calcAvg(item.ratings)}}</p>
              <a href="#" class="btn btn-outline-secondary"> Add To Cart</a>
            </div>         
        </div>
    </div>
    <div>
      <img src="img/bunk_room.jpg">
    </div>
      
  
<script>
  $('document').ready( function () {
    let items=[];

    $.get({
    method:'get',
    url:"http://localhost:3000/items/all"
    })
    .done( res => {
      res.forEach(item => {
        items.push(item)
      });
      new Vue({
      el: '#vue',
      data: {
        items: [{
                    name :'Queen Room',
                    stock :10, 
                    price : 1000,
                    picture: 'img/queen_room.jpeg',
                    category: 'Room',
                    ratings : [4,4,5],
                    reviews : ['good room','enjoyable stay']
                  },
                {
                  name :'King Suite',
                  stock :5, 
                  price : 2000,
                  picture: 'img/deluxe_room.jpg',
                  category: 'Room',
                  ratings : [5,5,5],
                  reviews : ['great room','very enjoyable stay']
                },
                {
                  name :'Standard Room',
                  stock :15, 
                  price : 500,
                  picture: 'img/bunk_room.jpg',
                  category: 'Room',
                  ratings : [4,3,3,3],
                  reviews : ['ok room','somewhat enjoyable stay']
                }]      
              },
        methods: {
          calcAvg: function (ratings) {
            let total = 0;
            ratings.forEach(rating => total+= rating);
            return (total / ratings.length).toFixed(1)
        }
      }
    })
    })
    
  })

  //   vm.$data === data // => true
  //   vm.$el === document.getElementById('example') // => true

  //   // $watch is an instance method
  //   vm.$watch('a', function (newValue, oldValue) {
  //     // This callback will be called when `vm.a` changes
  //   })
  // })
  

</script>

</body>

</html>